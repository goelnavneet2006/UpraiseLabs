CREATE DATABASE UPRAISE_LABS_DB;

USE UPRAISE_LABS_DB;

CREATE TABLE PROSPECT (ProspectID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, FirstName VARCHAR(32) NOT NULL, MiddleName VARCHAR(32), LastName VARCHAR(32), DOB DATE NOT NULL, PAN VARCHAR(16) NOT NULL UNIQUE, MobileISD VARCHAR(8) NOT NULL, Mobile VARCHAR(32) NOT NULL, Email VARCHAR(128) NOT NULL, ResidentialStatus ENUM('RES.IND', 'NRI-NRE', 'NRI-NRO', 'FOREGIN NATIONAL', 'PIO') NOT NULL, InvestorCategory ENUM('Individual', 'Minor', 'Sole-Proprietor') NOT NULL, ExpectedAmountforInvestment INT(32) NOT NULL, VerificationEmailSent BOOLEAN, KYCStatus BOOLEAN, ActivationKey VARCHAR(64) NOT NULL, IsDeleted BOOLEAN NOT NULL DEFAULT FALSE, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system');

CREATE TABLE USER_DEMOGRAPHY (MemberID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, FirstName VARCHAR(32) NOT NULL, MiddleName VARCHAR(32), LastName VARCHAR(32), DOB DATE NOT NULL, PAN VARCHAR(16) NOT NULL UNIQUE, ResidentialStatus ENUM('RES.IND', 'NRI-NRE', 'NRI-NRO', 'FOREGIN NATIONAL', 'PIO') NOT NULL, InvestorCategory ENUM('Individual', 'Minor', 'Sole-Proprietor') NOT NULL, ExpectedAmountforInvestment INT(32) NOT NULL, KYCStatus BOOLEAN, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system');

CREATE TABLE LOGIN_INFO (LIID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, MemberID INT(16) UNSIGNED NOT NULL, UserName VARCHAR(64) NOT NULL, Password VARCHAR(64) NOT NULL, Salt VARCHAR(64) NOT NULL, IsActiveMember BOOLEAN NOT NULL DEFAULT TRUE, IsResetRequired BOOLEAN NOT NULL DEFAULT FALSE, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (MemberID) REFERENCES USER_DEMOGRAPHY(MemberID));

CREATE TABLE PRIMARY_CONTACT (PCID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, MemberID INT(16) UNSIGNED NOT NULL, MobileISD VARCHAR(8) NOT NULL, Mobile VARCHAR(32) NOT NULL, Email VARCHAR(128) NOT NULL, IsActiveContact BOOLEAN NOT NULL DEFAULT TRUE, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (MemberID) REFERENCES USER_DEMOGRAPHY(MemberID));

CREATE TABLE FOREIGN_TAX_LAW (FTLID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, MemberID INT(16) UNSIGNED NOT NULL, IsIndia BOOLEAN NOT NULL DEFAULT TRUE, COB VARCHAR(32), COBTaxResidencyNo VARCHAR(32), COBTaxReferenceNo VARCHAR(32), COC VARCHAR(32), COCTaxResidencyNo VARCHAR(32), COCTaxReferenceNo VARCHAR(32), CON VARCHAR(32), CONTaxResidencyNo VARCHAR(32), CONTaxReferenceNo VARCHAR(32), CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (MemberID) REFERENCES USER_DEMOGRAPHY(MemberID));

CREATE TABLE ADDRESS_CONTACT (ADID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, MemberID INT(16) UNSIGNED NOT NULL, CAddressLine1 VARCHAR(64) NOT NULL, CAddressLine2 VARCHAR(64), CAddressLine3 VARCHAR(64), CCity VARCHAR(32) NOT NULL, CPincode VARCHAR(8) NOT NULL, CState VARCHAR(32) NOT NULL, CCountry VARCHAR(32) NOT NULL, CResidentTelISD VARCHAR(8),  CResidentTelSTD VARCHAR(8),  CResidentTel VARCHAR(16),  COfficeTelISD VARCHAR(8),  COfficeTelSTD VARCHAR(8),  COfficeTel VARCHAR(16),  CFaxTelISD VARCHAR(8),  CFaxTelSTD VARCHAR(8),  CFaxTel VARCHAR(16), PAddressLine1 VARCHAR(64) NOT NULL, PAddressLine2 VARCHAR(64), PAddressLine3 VARCHAR(64), PCity VARCHAR(32) NOT NULL, PPincode VARCHAR(8) NOT NULL, PState VARCHAR(32) NOT NULL, PCountry VARCHAR(32) NOT NULL, PResidentTelISD VARCHAR(8),  PResidentTelSTD VARCHAR(8),  PResidentTel VARCHAR(16),  POfficeTelISD VARCHAR(8),  POfficeTelSTD VARCHAR(8),  POfficeTel VARCHAR(16),  PFaxTelISD VARCHAR(8),  PFaxTelSTD VARCHAR(8),  PFaxTel VARCHAR(16), IsActiveAddress BOOLEAN NOT NULL DEFAULT TRUE, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (MemberID) REFERENCES USER_DEMOGRAPHY(MemberID));

CREATE TABLE CAN_MASTER (CANID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, CANNumber INT(16) NOT NULL UNIQUE,ModeOfHoldings ENUM('Single', 'Anyone or Servivor', 'Joint') NOT NULL, PrimaryMemberID INT(16) UNSIGNED NOT NULL, SecondaryMemberID INT(16) UNSIGNED, TertiaryMemberID INT(16) UNSIGNED, ReceivedFrom VARCHAR(64), DeclarationDate DATE NOT NULL,DeclarationPlace VARCHAR(32), IsActiveCAN BOOLEAN NOT NULL DEFAULT TRUE, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (PrimaryMemberID) REFERENCES USER_DEMOGRAPHY(MemberID), FOREIGN KEY (SecondaryMemberID) REFERENCES USER_DEMOGRAPHY(MemberID), FOREIGN KEY (TertiaryMemberID) REFERENCES USER_DEMOGRAPHY(MemberID));

CREATE TABLE DEPOSITORY_ACCOUNT_DETAIL (DAID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, CANID INT(16) UNSIGNED NOT NULL, DPName ENUM('NSDL', 'CDSL') NOT NULL, DPParticipantName VARCHAR(32) NOT NULL, DPParticipantID VARCHAR(32) NOT NULL, BeneficiaryAccountNo VARCHAR(32) NOT NULL, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (CANID) REFERENCES CAN_MASTER(CANID));

CREATE TABLE BANK_ACCOUNT_CONTACT (BAID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, CANID INT(16) UNSIGNED NOT NULL, AccountNumber1 VARCHAR(32) NOT NULL, AccountType1 ENUM('Savings', 'Current' ,'Cash Credit', 'O/D', 'Others') NOT NULL, MICR1 VARCHAR(16) NOT NULL, IFSC1 VARCHAR(16) NOT NULL, OtherType1 ENUM('NRE', 'NRO', 'FCNR', 'NRSR') NOT NULL, BankName1 VARCHAR(32) NOT NULL, BranchName1 VARCHAR(64) NOT NULL, City1 VARCHAR(32) NOT NULL, ProofOfAccount1 ENUM('Cancelled Cheque or Copy', 'Bank Passbook', 'Bank Statement', 'Letter from bank confirming the account') NOT NULL, PhysicalPayment1 BOOLEAN DEFAULT FALSE, AccountNumber2 VARCHAR(32), AccountType2 ENUM('Savings', 'Current' ,'Cash Credit', 'O/D', 'Others'), MICR2 VARCHAR(16), IFSC2 VARCHAR(16), OtherType2 ENUM('NRE', 'NRO', 'FCNR', 'NRSR'), BankName2 VARCHAR(32), BranchName2 VARCHAR(64), City2 VARCHAR(32), ProofOfAccount2 ENUM('Cancelled Cheque or Copy', 'Bank Passbook', 'Bank Statement', 'Letter from bank confirming the account'), PhysicalPayment2 BOOLEAN DEFAULT FALSE, AccountNumber3 VARCHAR(32), AccountType3 ENUM('Savings', 'Current' ,'Cash Credit', 'O/D', 'Others'), MICR3 VARCHAR(16), IFSC3 VARCHAR(16), OtherType3 ENUM('NRE', 'NRO', 'FCNR', 'NRSR'), BankName3 VARCHAR(32), BranchName3 VARCHAR(64), City3 VARCHAR(32), ProofOfAccount3 ENUM('Cancelled Cheque or Copy', 'Bank Passbook', 'Bank Statement', 'Letter from bank confirming the account'), PhysicalPayment3 BOOLEAN DEFAULT FALSE, AccountNumber4 VARCHAR(32), AccountType4 ENUM('Savings', 'Current' ,'Cash Credit', 'O/D', 'Others'), MICR4 VARCHAR(16), IFSC4 VARCHAR(16), OtherType4 ENUM('NRE', 'NRO', 'FCNR', 'NRSR'), BankName4 VARCHAR(32), BranchName4 VARCHAR(64), City4 VARCHAR(32), ProofOfAccount4 ENUM('Cancelled Cheque or Copy', 'Bank Passbook', 'Bank Statement', 'Letter from bank confirming the account'), PhysicalPayment4 BOOLEAN DEFAULT FALSE, AccountNumber5 VARCHAR(32), AccountType5 ENUM('Savings', 'Current' ,'Cash Credit', 'O/D', 'Others'), MICR5 VARCHAR(16), IFSC5 VARCHAR(16), OtherType5 ENUM('NRE', 'NRO', 'FCNR', 'NRSR'), BankName5 VARCHAR(32), BranchName5 VARCHAR(64), City5 VARCHAR(32), ProofOfAccount5 ENUM('Cancelled Cheque or Copy', 'Bank Passbook', 'Bank Statement', 'Letter from bank confirming the account'), PhysicalPayment5 BOOLEAN DEFAULT FALSE, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (CANID) REFERENCES CAN_MASTER(CANID));

CREATE TABLE NOMINATION (NOID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, CANID INT(16) UNSIGNED NOT NULL, IsWishToNominate BOOLEAN NOT NULL DEFAULT TRUE, NomineeName1 VARCHAR(64), Address1 VARCHAR(128), NominationRelationship1 VARCHAR(32), DOB1 DATE, GuardianName1 VARCHAR(64), GuardianAddress1 VARCHAR(128), Proportion1 INT(8),NomineeName2 VARCHAR(64), Address2 VARCHAR(128), NominationRelationship2 VARCHAR(32), DOB2 DATE, GuardianName2 VARCHAR(64), GuardianAddress2 VARCHAR(128), Proportion2 INT(8),NomineeName3 VARCHAR(64), Address3 VARCHAR(128), NominationRelationship3 VARCHAR(32), DOB3 DATE, GuardianName3 VARCHAR(64), GuardianAddress3 VARCHAR(128), Proportion3 INT(8), CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (CANID) REFERENCES CAN_MASTER(CANID));

CREATE TABLE SCHEMES_MASTER (SMID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, MFName VARCHAR(64) NOT NULL, SchemeName VARCHAR(64) NOT NULL, Type ENUM('Debt', 'Equity') NOT NULL, RegularDirect ENUM('Regular', 'Direct') NOT NULL, PlanOption ENUM('Dividend', 'Growth') NOT NULL, LaunchDate Date NOT NULL, FaceValue INT(16) NOT NULL, NAVonLaunch INT(16) NOT NULL, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system');

CREATE TABLE NAV_MASTER (NMID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, SMID INT(16) UNSIGNED NOT NULL, Date Date NOT NULL, NAV INT(16) NOT NULL, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (SMID) REFERENCES SCHEMES_MASTER(SMID));

CREATE TABLE MEMBER_HOLDINGS (MHID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, CANID INT(16) UNSIGNED NOT NULL, SMID INT(16) UNSIGNED NOT NULL, TransactionDate DATE NOT NULL, Amount FLOAT(32, 8) NOT NULL, NAVonTransactionDate DATE NOT NULL, Units INT(16), TypeOfTransaction ENUM('Purchase', 'Remittance'), FolioNo INT(16), ProductName VARCHAR(64) NOT NULL, CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (CANID) REFERENCES CAN_MASTER(CANID), FOREIGN KEY (SMID) REFERENCES SCHEMES_MASTER(SMID));

CREATE TABLE OTHER_DETAILS (ODID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, MemberID INT(16) UNSIGNED NOT NULL, Income VARCHAR(32), DateofNetWorth DATE, Occupation VARCHAR(32), IsPoliticallyExposedPerson BOOLEAN NOT NULL DEFAULT FALSE, IsRelatedToPoliticallyExposedPerson BOOLEAN NOT NULL DEFAULT FALSE, AnyOtherInformation VARCHAR(64), CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (MemberID) REFERENCES USER_DEMOGRAPHY(MemberID));

CREATE TABLE DOCUMENT_COLLECTION (DCID INT(16) UNSIGNED AUTO_INCREMENT PRIMARY KEY, MemberID INT(16) UNSIGNED NOT NULL, DOBProof VARCHAR(128), DOBProofLocation VARCHAR(256), PANProofLocation VARCHAR(256), AddressProof VARCHAR(128), AddressProofLocation VARCHAR(256), KYCProof VARCHAR(128), KYCProofLocation VARCHAR(256), CreatedTime TIMESTAMP NOT NULL DEFAULT NOW(), CreatedBy VARCHAR(32) NOT NULL DEFAULT 'system', LastUpdatedTime TIMESTAMP NOT NULL DEFAULT NOW(), LastUpdatedBy VARCHAR(32) NOT NULL DEFAULT 'system', FOREIGN KEY (MemberID) REFERENCES USER_DEMOGRAPHY(MemberID));




--CREATE TABLE USER (user_id INT(8) UNSIGNED AUTO_INCREMENT PRIMARY KEY, email VARCHAR(128) NOT NULL, password VARCHAR(64) NOT NULL, is_active BOOL NOT NULL DEFAULT FALSE, creation_time TIMESTAMP NOT NULL DEFAULT NOW(), last_login_time TIMESTAMP NOT NULL DEFAULT NOW(), activation_token VARCHAR(64) NOT NULL, salt_token VARCHAR(64) NOT NULL);
--
--CREATE TABLE USER_DEMOGRAPHIC (user_demographic_id INT(8) UNSIGNED AUTO_INCREMENT PRIMARY KEY, user_id INT(8) UNSIGNED NOT NULL, firstname VARCHAR(32) NOT NULL, middlename VARCHAR(32), lastname VARCHAR(32), mobile VARCHAR(16) NOT NULL, landline_std VARCHAR(16), landline_number VARCHAR(16), dob DATE NOT NULL, pan VARCHAR(16) NOT NULL, address_line_1 VARCHAR(64) NOT NULL, address_line_2 VARCHAR(64), city VARCHAR(32) NOT NULL, state VARCHAR(32) NOT NULL,pincode VARCHAR(8) NOT NULL, creation_time TIMESTAMP NOT NULL DEFAULT NOW(), created_by ENUM('user', 'admin') NOT NULL DEFAULT 'user', last_updated_time TIMESTAMP NOT NULL DEFAULT NOW(), last_updated_by ENUM('user', 'admin') NOT NULL DEFAULT 'user', FOREIGN KEY (user_id) REFERENCES USER(user_id));
--CREATE TABLE MUTUAL_FUND_NAV (mutual_fund_nav_id INT(8) UNSIGNED AUTO_INCREMENT PRIMARY KEY, fund_name VARCHAR(32) NOT NULL, fund_id VARCHAR(32) NOT NULL, face_value VARCHAR(32) NOT NULL, opening_day_value VARCHAR(32) NOT NULL, previous_day_value VARCHAR(32) NOT NULL, current_day_value VARCHAR(32) NOT NULL, creation_time TIMESTAMP NOT NULL DEFAULT NOW(), created_by ENUM('manual', 'feed') NOT NULL DEFAULT 'manual', last_updated_time TIMESTAMP NOT NULL DEFAULT NOW(), last_updated_by ENUM('manual', 'feed') NOT NULL DEFAULT 'manual');
--
--CREATE TABLE USER_HOLDINGS (user_holdings_id INT(8) UNSIGNED AUTO_INCREMENT PRIMARY KEY, user_id INT(8) UNSIGNED NOT NULL, mutual_fund_id VARCHAR(32) NOT NULL, mutual_fund_units VARCHAR(32) NOT NULL, creation_time TIMESTAMP NOT NULL DEFAULT NOW(), created_by ENUM('manual', 'feed') NOT NULL DEFAULT 'manual', last_updated_time TIMESTAMP NOT NULL DEFAULT NOW(), last_updated_by ENUM('manual', 'feed') NOT NULL DEFAULT 'manual', FOREIGN KEY (user_id) REFERENCES USER(user_id));
